document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("[if]").forEach((e=>{const t=e.getAttribute("if").replace(/{{(.*?)}}/,((e,t)=>window[t]||""));new Function("window",`return ${t};`)(window)||(e.style.display="none")}))})),window.myframework={routes:{},loadcontent:function(e,t=!0){fetch(e).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.text()})).then((n=>{const o=document.getElementById("app");o.innerHTML="",o.innerHTML=n,t&&history.pushState({link:e},null,e)})).catch((e=>console.error("error",e)))},handlePopState:function(e){e.state&&e.state.link&&myframework.loadcontent(e.state.link,!1)},init:function(){class e extends HTMLElement{constructor(){super(),this.addEventListener("click",(e=>{e.preventDefault();const t=this.getAttribute("link");t&&myframework.loadcontent(t)}))}}customElements.define("x-route",e),window.addEventListener("popstate",this.handlePopState)}},document.addEventListener("DOMContentLoaded",(()=>{myframework.init()}));class Component extends HTMLElement{constructor(){super(),this.loadTemplate()}async loadTemplate(){let e=this.getAttribute("src");if(e)try{let t=await fetch(e);if(!t.ok)throw new Error("Failed to load template");let n=await t.text();this.innerHTML=n,this.replaceProps(),this.applyConditions(),this.setupEvents()}catch(e){console.error("Component Load Error:",e)}}replaceProps(){[...this.attributes].forEach((e=>{"src"!==e.name&&"if"!==e.name&&(this.innerHTML=this.innerHTML.replaceAll(`{{${e.name}}}`,e.value))}))}applyConditions(){let e=this.getAttribute("if");if(e)try{let t=new Function(`return (${e})`)();this.style.display=t?"block":"none"}catch(e){console.error("Condition Error:",e)}}setupEvents(){[...this.attributes].forEach((e=>{if(e.name.startsWith("on-")){let t=e.name.slice(3);this.addEventListener(t,(()=>{try{new Function(e.value)()}catch(e){console.error("Event Error:",e)}}))}}))}}customElements.define("x-component",Component);class LoopEl extends HTMLElement{constructor(){super();const e=this.getAttribute("repeat");let t=this.innerHTML;const n=this.getAttribute("ElementName");if(e)if(isNaN(Number(e))){console.error("repeat attribute should be a number");const e="repeat attribute should be a number",t="500";Swal.fire({position:"center",icon:"error",title:`Error: ${t}`,text:e,showConfirmButton:!1})}else this.innerHTML="",this.loopfunction(e,t,n);else{console.error("repeat attribute is required");const e="repeat attribute is required, please add it",t='<lo-op repeat="5">Your Content Here</lo-op>';Swal.fire({position:"center",icon:"error",title:`${e}`,text:`${t}`,showConfirmButton:!1})}}loopfunction(e,t,n){for(let o=0;o<e;o++){const e=document.createElement("div");e.innerHTML=t,e.classList.add(n),e.classList.add(n+"_"+(o+1)),e.id=n+"_id_"+(o+1),this.appendChild(e)}document.dispatchEvent(new Event("elementsCreated"))}}customElements.define("x-loopy",LoopEl);class XClick extends HTMLElement{constructor(){super(),this.addEventListener("click",(()=>{let action=this.getAttribute("action");try{eval(action)}catch(e){console.error("XClick Error:",e)}}))}}customElements.define("x-click",XClick);class XLoop extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.name=this.getAttribute("name"),this.template=this.innerHTML.trim(),this.innerHTML="",this.render()}render(){this.shadowRoot.innerHTML="";let e=window[this.name]||[];Array.isArray(e)&&e.forEach((e=>{let t=this.template.replace(/\{\{item\.(\w+)\}\}/g,((t,n)=>void 0!==e[n]?e[n]:t));this.shadowRoot.innerHTML+=t}))}}customElements.define("x-loop",XLoop);class XVar extends HTMLElement{constructor(){super(),this.name=this.getAttribute("name");let e=this.getAttribute("value")||"";this.value=this.parseValue(e),Object.defineProperty(window,this.name,{get:()=>this.value,set:e=>{this.value=e,this.updateElements()}}),this.updateElements()}parseValue(e){try{return JSON.parse(e.replace(/'/g,'"'))}catch{return e}}updateElements(){document.querySelectorAll("*").forEach((e=>{e.children.length?[...e.childNodes].forEach((e=>{e.nodeType===Node.TEXT_NODE&&(e.textContent=e.textContent.replace(new RegExp(`{{${this.name}}}`,"g"),window[this.name]))})):e.innerHTML=e.innerHTML.replace(new RegExp(`{{${this.name}}}`,"g"),window[this.name])})),document.querySelectorAll(`x-input[name="${this.name}"] input`).forEach((e=>{e!==document.activeElement&&(e.value=window[this.name])}))}}customElements.define("x-var",XVar);
