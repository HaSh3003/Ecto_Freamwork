document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll("[if]");e.forEach(e=>{let t=e.getAttribute("if"),r=t.replace(/{{(.*?)}}/,(e,t)=>window[t]||""),n=Function("window",`return ${r};`);n(window)||(e.style.display="none")})}),window.myframework={routes:{},loadcontent:function(e,t=!0){fetch(e).then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.text()}).then(r=>{let n=document.getElementById("app");n.innerHTML="",n.innerHTML=r,t&&history.pushState({link:e},null,e)}).catch(e=>console.error("error",e))},handlePopState:function(e){e.state&&e.state.link&&myframework.loadcontent(e.state.link,!1)},init:function(){class e extends HTMLElement{constructor(){super(),this.addEventListener("click",e=>{e.preventDefault();let t=this.getAttribute("link");t&&myframework.loadcontent(t)})}}customElements.define("x-route",e),window.addEventListener("popstate",this.handlePopState)}},document.addEventListener("DOMContentLoaded",()=>{myframework.init()});class Component extends HTMLElement{constructor(){super(),this.loadTemplate()}async loadTemplate(){let e=this.getAttribute("src");if(e)try{let t=await fetch(e);if(!t.ok)throw Error("Failed to load template");let r=await t.text();this.innerHTML=r,this.replaceProps(),this.applyConditions(),this.setupEvents()}catch(n){console.error("Component Load Error:",n)}}replaceProps(){[...this.attributes].forEach(e=>{"src"!==e.name&&"if"!==e.name&&(this.innerHTML=this.innerHTML.replaceAll(`{{${e.name}}}`,e.value))})}applyConditions(){let e=this.getAttribute("if");if(e)try{let t=Function(`return (${e})`)();this.style.display=t?"block":"none"}catch(r){console.error("Condition Error:",r)}}setupEvents(){[...this.attributes].forEach(e=>{if(e.name.startsWith("on-")){let t=e.name.slice(3);this.addEventListener(t,()=>{try{Function(e.value)()}catch(t){console.error("Event Error:",t)}})}})}}customElements.define("x-component",Component);class LoopEl extends HTMLElement{constructor(){super();let e=this.getAttribute("repeat"),t=this.innerHTML,r=this.getAttribute("ElementName");if(e){if(isNaN(Number(e))){console.error("repeat attribute should be a number");let n="repeat attribute should be a number",i="500";Swal.fire({position:"center",icon:"error",title:`Error: ${i}`,text:n,showConfirmButton:!1})}else this.innerHTML="",this.loopfunction(e,t,r)}else{console.error("repeat attribute is required");let o="repeat attribute is required, please add it",s='<lo-op repeat="5">Your Content Here</lo-op>';Swal.fire({position:"center",icon:"error",title:`${o}`,text:`${s}`,showConfirmButton:!1})}}loopfunction(e,t,r){for(let n=0;n<e;n++){let i=document.createElement("div");i.innerHTML=t,i.classList.add(r),i.classList.add(r+"_"+(n+1)),i.id=r+"_id_"+(n+1),this.appendChild(i)}document.dispatchEvent(new Event("elementsCreated"))}}customElements.define("x-loopy",LoopEl);class XClick extends HTMLElement{constructor(){super(),this.addEventListener("click",()=>{let action=this.getAttribute("action");try{eval(action)}catch(error){console.error("XClick Error:",error)}})}}customElements.define("x-click",XClick);class XLoop extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.name=this.getAttribute("name"),this.template=this.innerHTML.trim(),this.innerHTML="",this.render()}render(){this.shadowRoot.innerHTML="";let e=window[this.name]||[];Array.isArray(e)&&e.forEach(e=>{let t=this.template.replace(/\{\{item\.(\w+)\}\}/g,(t,r)=>void 0!==e[r]?e[r]:t);this.shadowRoot.innerHTML+=t})}}customElements.define("x-loop",XLoop);class XVar extends HTMLElement{constructor(){super(),this.name=this.getAttribute("name");let e=this.getAttribute("value")||"";this.value=this.parseValue(e),Object.defineProperty(window,this.name,{get:()=>this.value,set:e=>{this.value=e,this.updateElements()}}),this.updateElements()}parseValue(e){try{return JSON.parse(e.replace(/'/g,'"'))}catch{return e}}updateElements(){document.querySelectorAll("*").forEach(e=>{e.children.length?[...e.childNodes].forEach(e=>{e.nodeType===Node.TEXT_NODE&&(e.textContent=e.textContent.replace(RegExp(`{{${this.name}}}`,"g"),window[this.name]))}):e.innerHTML=e.innerHTML.replace(RegExp(`{{${this.name}}}`,"g"),window[this.name])}),document.querySelectorAll(`x-input[name="${this.name}"] input`).forEach(e=>{e!==document.activeElement&&(e.value=window[this.name])})}}customElements.define("x-var",XVar);
